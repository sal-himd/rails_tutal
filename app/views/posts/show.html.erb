<% provide(:title, @post.title) %>
<h1><%= @post.title %></h1>
<div class="posts">
  <div class="post_content">
    <%= @post.content %>
  </div>
  <div class="post_infos">
    Created at : <%= @post.created_at %> by <%= @post.user.name %>, <%= @post.comments.count %> comment(s).
  </div>
</div>
<ol class="comments">
  <h4>Comment(s) :</h4>
  <% @post.comments.all.each do |comment| %>
    <li class="comment_content">
      <p><%= comment.content %></p>
      by <%= comment.user.name %>
    </li>
  <% end %>
</ol>
<% if logged_in? %>
  <%= form_for @comment, class: "form-vertical" do |form| %>
    <%= render 'shared/error_messages', object: form.object %>
    <div class="form-group">
      <%= form.text_area :content,  placeholder: "Compose new comment...", class: 'form-control' %>
    </div>
    <div class="form-group">
      <%= form.hidden_field :post_id, value: @post.id %>
    </div>
    <%= form.submit "Post comment", class: "btn btn-primary" %>
  <% end %>
<% end %>
